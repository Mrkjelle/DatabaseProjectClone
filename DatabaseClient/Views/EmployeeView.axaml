<UserControl
    x:Class="DatabaseClient.Views.EmployeeView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dgrid="clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls.DataGrid"
    xmlns:util="clr-namespace:DatabaseClient.Utilities"
    xmlns:vm="clr-namespace:DatabaseClient.ViewModels"
    x:DataType="vm:EmployeeViewModel">

    <UserControl.Resources>
        <util:DateTimeToOffsetConverter x:Key="DateTimeToOffsetConverter" />
    </UserControl.Resources>

    <Grid Background="rgba(30, 30, 30, 1)" RowDefinitions="Auto,*">
        <Grid
            Grid.Row="0"
            Margin="0,0,10,0"
            VerticalAlignment="Center"
            ColumnDefinitions="Auto,Auto">
            <TextBlock
                Margin="10"
                FontSize="20"
                FontWeight="Bold"
                Foreground="rgba(180, 21, 29, 1)"
                Text="Employee Directory" />
            <Button
                Grid.Column="1"
                Margin="20,0,0,0"
                VerticalAlignment="Center"
                Click="OnAddEmployeeClick"
                Content="Add Employee" />
        </Grid>
        <DataGrid
            x:Name="EmployeeGrid"
            Grid.Row="1"
            Margin="10"
            AutoGenerateColumns="True"
            AutoGeneratingColumn="OnAutoGeneratingColumn"
            IsReadOnly="True"
            IsVisible="{Binding ShowEmployeeGrid}"
            ItemsSource="{Binding Employees}">
            <DataGrid.ContextMenu>
                <ContextMenu>
                    <MenuItem Click="OnEditEmployeeClick" Header="Edit Employee" />
                    <MenuItem Click="OnDeleteEmployeeClick" Header="Delete Employee" />
                    <MenuItem Header="Assign to Project" SubmenuOpened="OnAssignProjectSubmenuOpened">
                        <MenuItem.Items>
                            <MenuItem Header="Loading..." IsEnabled="False" />
                        </MenuItem.Items>
                    </MenuItem>
                </ContextMenu>
            </DataGrid.ContextMenu>
        </DataGrid>

        <Border
            Grid.Row="1"
            Padding="20"
            Background="rgba(50, 50, 50, 1)"
            IsVisible="{Binding ShowAddEmployeeForm}">

            <StackPanel Spacing="10">
                <TextBlock
                    FontSize="18"
                    FontWeight="Bold"
                    Foreground="White"
                    Text="Enter New Employee Details" />
                <TextBox Text="{Binding NewEmployee.EmployeeNO}" Watermark="Employee Number" />
                <TextBox Text="{Binding NewEmployee.FirstName}" Watermark="First Name" />
                <TextBox Text="{Binding NewEmployee.LastName}" Watermark="Last Name" />
                <TextBox Text="{Binding NewEmployee.Email}" Watermark="Email" />
                <ComboBox
                    ItemsSource="{Binding Divisions}"
                    PlaceholderText="Select Division"
                    SelectedItem="{Binding SelectedDivision}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding DivisionCode}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                <TextBlock
                    Margin="0,10,0,0"
                    FontSize="14"
                    Foreground="White"
                    Text="Enter Employee Start Date (Dates in the future will be automatically converted to the current date)" />
                <DatePicker
                    x:Name="HireDatePicker"
                    Background="#222"
                    DayFormat="dd"
                    Foreground="White"
                    IsEnabled="True"
                    MonthFormat="MMMM"
                    YearFormat="yyyy" />
                <StackPanel
                    Margin="0,10,0,0"
                    Orientation="Horizontal"
                    Spacing="10">
                    <Button Click="OnSaveEmployeeClick" Content="Save" />
                    <Button Click="OnCancelAddEmployeeClick" Content="Cancel" />
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
